<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:fb="http://ogp.me/ns/fb#"
   lang="en">
   <html>
      <head>
         <meta charset="utf-8">
         <title>Joseph Sierejko - Programmer</title>

                    <link rel="stylesheet" type="text/css" href="css/shared-style.css"/>
          <link rel="stylesheet" type="text/css" href="css/project-style.css"/>
          <link rel="stylesheet" type="text/css" href="/css/bootstrap.css"/>
          <link rel="stylesheet" type="text/css" href="/css/bootstrap-xl.css"/>

          <!--  EXTENSION URLS -->
          <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/prettify.css"></script>
          <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>

          <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?lang=cpp&amp;"></script>
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
          <script src="http://code.jquery.com/color/jquery.color-2.1.2.min.js"></script>
          <!-- //EXTENSION URLS -->

          <!-- GOOGLE FONT LINK -->
          <link href="https://fonts.googleapis.com/css2?family=Average+Sans&family=Baloo+2&family=Baloo+Chettan+2&family=Montserrat&family=Raleway&display=swap" rel="stylesheet">
          <!-- //GOOGLE FONT LINK -->
          <!-- //GOOGLE FONT LINK -->


          <!-- STYLESHEETS -->

          <link rel="stylesheet" type="text/css" href="css/code-style.css"/>


          <!-- //STYLESHEETS -->
          
          <!-- JAVASCRIPT -->
          <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>          
          <script type="text/javascript" src="js/shared.js"></script>
          <!-- //JAVASCRIPT -->
          
      </head>
    
                          
    <div id="sidebar-menu" class="sidebar">                       
        <div id="sidebar-header"></div>
        <a href="javascript:void(0)" class="close-button" onclick="closeNav()">Ã—</a>
                <a href="#" type = "button" class ="sidebar-item" id = "project-dropdown-button" data-target-element ="#project-header" onclick="closeNav()">Projects</a>       
                <a href="#" type = "button" class = "sidebar-item" id = "design-dropdown-button" data-target-element ="#design-header" onclick="closeNav()">Graphic Design</a>
        <a href="#" type = "button" class = "sidebar-item" id = "about-dropdown-button" data-target-element ="#about-header" onclick="closeNav()">About</a>
                               
        <a href="#" type = "button" class = "sidebar-item" id = "contact-dropdown-button" data-target-element ="#contact-header" onclick="closeNav()">Contact</a>
        <a href="#" type = "button" class = "sidebar-item" id = "resume-dropdown-button">Resume</a>
    </div>      
      <body>
          <div>
          <div class="container-md"  id="container">
            <div class ="row">
               <div class ="col-xs-12 col-sm-12 col-md-12">
                  <div class = "header">
                     <div id = "title">
                        Red Rock Farmer
                     </div>
                      <span  class="overview-wrapper">
                         <table>
                            <tbody>
                               <tr class = "header-content">
                                  <td><b>roles</b></td>
                                  <td>Lead Programmer &bull; 2D Artist  &bull; UI</td>
                               </tr>
                               <tr>
                                  <td><b>software</b></td>
                                  <td> MonoGame &bull; Unity Engine &bull; Adobe Photoshop &bull;
                                     Visual Studio
                                  </td>
                               </tr>
                               <tr class = "header-content">
                                  <td><b>languages</b></td>
                                  <td> C# &bull; XML</td>
                               </tr>
                               <tr class = "header-content">
                                  <td><b>team size</b></td>
                                  <td><img src ="images/teammember_icon.png"></td>
                               </tr>
                            </tbody>
                         </table>
                      </span>
                  </div>
                  <div class ="project-content-container">
                     <div class ="col">
                        <div class = "row content-wrapper project-description"><div class="content justify pad btm-10"><b>Red Rock Farmer</b> is a farming RPG where you are a part of the first group of colonies on Mars, with the goal to make the planet habitable, recruit new neighbors as you expand and build out a farm from the red soil. Initially, I built it for submission for my 10 week Senior Project during my Associate's Degree. It was first built using Unity, but I later ported it to monogame simply because I felt more comfortable programming my own tools purely in code. Though there are some distinct differences at the moment, I was able to redesign the code using the Monogame/XNA extension in 3 weeks. part of it due to 2d assets being finished. Functionally it plays the same, but improvements were made on a trailing camera, and I wrote UI scripts to handle screen and world space canvases, which were more tailored to my needs.</div>
                            <div class ="content justify pad btm-10">
                                As the project is temporarily on hold, there are a plenty of iterations that need to be made, and a few placeholder sprites that need to be swapped out. All this to say, this is still in a prototype state.
                            </div>
                         <div class="row video-container">
                           <iframe width="560" height src="https://www.youtube.com/embed/4R5RiLqcLrg" frameborder="0"  allowfullscreen></iframe>
                        </div>
                         <div style="padding-bottom: 15px;"></div>
                            
                            <!--GAME ENGINE CONTENT-->
                            <button class="collapse-button" id="gameengine-button" type="button" data-toggle="collapse" data-target="#gameengine-collapse"
            aria-expanded="true" aria-controls="gameengine-collapse">
                                 <div class ="collapse-button-content"> Building a Level Editor in C# and MonoGame<img class = "dropdown-icon" src="images/content_dropdown_triangle.png"/>
                                </div>
                             </button>
                           <div class="collapse collapse-content" id="gameengine-collapse">
                               <div class ="content justify pad vt-10">I didn't originally have a goal of building a level editor in MonoGame, but after making a few iterations, using a 2D array with Enums to label tiletypes, determining collision via child Tile classes, etc, it eventually made sense to make a 2D engine using window forms. The Level Editor requires 2 VS projects; LevelEditor and TileEngine.</div>
                               <div class = "content pad btm-5">
                                   Here is an eagle view of the Editor's Interface:
                               </div>
                               <div class="content">
                               <img src="images/red-rock-farmer-editor-breakdown.png">
                               </div>
                               <div class="content font-36 pad top-10 btm-5">The Level Editor</div>
                              <div class ="content justify">
                               <ul>
                                   <li>
                                       The Level Editor is the series of tools that allow using the Tile Engine to "paint" different tiles onto a Map.
                                   </li>
                                   <li>The interface is one part Window Form(s) and one part MonoGame executable.
                                   <ul>
                                       <li>
                                           Window forms hold all the user controls, sprite selection, imported spritesheets, etc.
                                       </li>
                                       <li>The Tile Engine itself is what makes use of the Editor tools (it handles input), but the Map Editor Window Form takes care of setting tiles, which is sent to the Tile Engine to edit the tiles.</li>
                                       </ul>
                                   </li>
                                  </ul>
                                  <ul>
                                       <li>
                                           <b>User Settings</b> are also stored after most actions, including importing sprite sheets, adding new Code Values to mark tiles, etc.
                                       </li>
                                       <li>
                                           Most of these actions, saving and loading, importing, are done through additional window forms and dialog windows.
                                       </li>

                                   </ul>
                               </div>
                                                                      
                               <button class="collapse-button" data-toggle="collapse" href="#map-editor-collapse" role="button" aria-expanded="true" aria-controls="map-editor-collapse">
                                    <div class="collapse-button-content">
                                        Code: Map Editor Features<img class = "dropdown-icon" src="images/content_dropdown_triangle.png"/></div>
                               </button>
                               <div class="collapse collapse-content-inner" id="map-editor-collapse">
                                   <div class="content justify pad top-10 btm-10">
                                       Most of the Map Editor tools are in the MapEditor Window Form class. This is where I could pick which sprite to use, add spritesheets, decide whether a tile requires a CodeValue or Collision on a Tile, etc

                                   </div>
                                   <div class="content pad font-16 vt-5"><i>MapEditor.cs Snippet</i></div>
                                   
                                   <pre class="prettyprint lang-cs linenums:57">internal void AddSpriteSheet(string fileName, int animationFrames)
{
    if (!listSpriteSheet.Items.Contains(fileName))  //Sprite is not loaded in already
    {
        string filePath = Application.StartupPath + @"\Content\Textures\" + fileName;
        Bitmap newSpriteSheet = new Bitmap(filePath);
        int spriteSheetIndex = spriteSheets.Count;  //SpriteSheet number

        spriteSheets.Add(newSpriteSheet);   
        spriteFrames.Add(animationFrames);  //If SpriteSheet is an animated strip

        listSpriteSheet.Items.Add(fileName);    //Add SpriteSheet to List

        Settings.AddSpriteSheet(fileName, animationFrames); //Add SpriteSheet for Saving in User Settings
    }
}

void LoadImageList()
{
    imgListTiles.Images.Clear();
    listTiles.Items.Clear();
    Bitmap loadedSpriteSheet = spriteSheets[CurrentSpriteSheet];

    int tileCount = 0;

    for (int i = 0; i &lt; (loadedSpriteSheet.Width / TileMap.TileWidth) / spriteFrames[CurrentSpriteSheet]; i++)
        for (int j = 0; j &lt; loadedSpriteSheet.Height / TileMap.TileHeight; j++)
        {
            //Cut a tile out of larger bitmap
            Bitmap newBitmap = loadedSpriteSheet.Clone(
                new System.Drawing.Rectangle(
                    i * TileMap.TileWidth, j * TileMap.TileHeight,
                    TileMap.TileWidth, TileMap.TileHeight), System.Drawing.Imaging.PixelFormat.DontCare);

            imgListTiles.Images.Add(newBitmap); //Add to list of images

            string itemName = "";

            if (tileCount == 0)
                itemName = "Empty";

            //Add a new listview item
            listTiles.Items.Add(new ListViewItem(itemName, tileCount++));
        }
}</pre>
                                   <div class="content justify pad vt-10">
                                       I implemented an Auto-save function that saves when the application exits. This saves Code Values and SpriteSheets that get added. They are then loaded in a new instance in the MapEditor's constructor    
                                   </div>
                                   <pre class="prettyprint lang-cs linenums:153">#region Save And Load User Settings

public void SaveSettings()
{
    BinaryFormatter formatter = new BinaryFormatter();
    FileStream fileStream = new FileStream(Application.StartupPath + @"\Settings\Settings.txt", FileMode.OpenOrCreate);
    formatter.Serialize(fileStream, Settings);
    fileStream.Close();
}

public void LoadSettings()
{
    if (File.Exists(Application.StartupPath + @"\Settings\Settings.txt"))
    {
        BinaryFormatter formatter = new BinaryFormatter();
        FileStream fileStream = new FileStream(Application.StartupPath + @"\Settings\Settings.txt", FileMode.Open);
        Settings = (Settings)formatter.Deserialize(fileStream);
        RestoreEditorSettings();    //Add loaded settings to Editor Window Form
        fileStream.Close();
    }
    else
        AddSpriteSheet("TerrainSpriteSheet.png", 1);    //If load fails/ no file located in folder, reinitialize with default sprite sheet
}

void RestoreEditorSettings()
{
    //Add all the saved user code values to combo box
    for (int i = 0; i &lt; Settings.cboCodeValues.Count; i++)
        cboCodeValues.Items.Add(Settings.cboCodeValues[i]);

    itemCodeValues.AddRange(Settings.gameCodeValues); //Make all code values available to TileEngine

    //Add all loaded sprite sheets
    for (int i = 0; i &lt; Settings.spriteSheets.Count; i++)
        AddSpriteSheet(Settings.spriteSheets[i], Settings.spriteSheetFrames[i]);
}

public void RestoreTileMapSettings()
{
    if (Settings.spriteSheets.Count &gt; 0)
        for (int i = 0; i &lt; Settings.spriteSheets.Count; i++)
            TileMap.AddSpriteSheet(Settings.spriteSheets[i].Replace(".png", ""));
    else
        TileMap.AddSpriteSheet("TerrainSpriteSheet");
}

#endregion</pre>
                                   <div class="content pad vt-10">
                                       To import a SpriteSheet, a dialog box is opened, specifying the usable file types and adding them to the MapEditor
                                   </div>
                                   <div class="content font-16 pad vt-5">
                                       <i>NewSpriteSheetForm.cs Snippet</i>
                                   </div>
                                   <pre class="prettyprint lang-cs linenums:43">void browseButton_Click(object sender, EventArgs e)
{
    using (openFileDialog)
    {
        openFileDialog.InitialDirectory = "c:\\";   //Starting directory
        
        //Acceptable File Types
        openFileDialog.Filter = "Image Files (*.png, *.jpg) | *.jpg; *.png | All Files (*.*) | *.*";
        openFileDialog.FilterIndex = 2;
        openFileDialog.RestoreDirectory = true;

        if(openFileDialog.ShowDialog() == DialogResult.OK)
        {
            //Assign found image to file
            File = Image.FromFile(openFileDialog.FileName);

            //Display in textBox
            filePath = openFileDialog.FileName;
            directoryPath = Path.GetDirectoryName(filePath);

            Stream fileStream = openFileDialog.OpenFile();

            using(StreamReader reader = new StreamReader(fileStream))
            {
                fileContent = reader.ReadToEnd();
            }
        }
    }
    txtBoxFilePath.Text = openFileDialog.SafeFileName;
}

private void btnImport_Click(object sender, EventArgs e)
{
    if(File != null &amp;&amp; openFileDialog != null)
        File.Save(Application.StartupPath + "\\Content\\Textures\\" + openFileDialog.SafeFileName);

    editor.AddSpriteSheet(txtBoxFilePath.Text, (int)cboAnimationFrames.SelectedItem);
}</pre>
                                   <div class="content pad btm-10"></div>
                               </div>       

                               <div class="content font-36 pad vt-5">The Tile Engine</div>
                              <div class ="content">
                                   <ul>
                                   <li>
                                       The Tile Engine is the bridge between the Level Construction and the Projects that use it.

                                   </li>
                                       <li>
                                            The Tile Engine handles all Saving and Loading the Map Files in both the Level Editor and any Projects that use the Map that were generated.
                                             <ul>
                                                 <li>
                                                     Maps are Saved as .MAP and sent to the Content folder for use.
                                                 </li>
                                                 <li>
                                                     They are also are Loaded by their File names.
                                                 </li>
                                           </ul>
                                           
                                       </li>
                                  </ul>
                                  <ul>
                                   <li> 
                                       Everything that is defined in the Map Editor gets funneled into Tiles on a TileMap class.
                                       <ul><li>
                                           Through the use of overloaded SetTile( . . . ) methods, I can set update tile settings on the fly. The point of this is to change individual settings without creating an entirely <i>new</i> Tile class. Some Uses include
                                           <ul>
                                               <li>
                                                   Update Collision settings
                                               </li>
                                               <li>
                                                   Change a Sprite on a particular layer
                                               </li>
                                               <li>
                                                   Set Tile Sprite from static to animated
                                               </li>
                                               <li>
                                                   Tag a tile using Code Value. This is to mark tiles for purposes in the projects. This is analagous to Layers in Unity, or something similar to Collision Channels on Actors in Unreal.
                                               </li>
                                           </ul>
                                           
                                           </li>
                                       </ul>
                                   </li>

                                  </ul>
                                      
                               </div>
                               <button class="collapse-button" data-toggle="collapse" href="#tilemap-collapse" role="button" aria-expanded="true" aria-controls="tilemap-collapse">
                                    <div class="collapse-button-content">
                                        Code: Tile Map <img class = "dropdown-icon" src="images/content_dropdown_triangle.png"/></div>
                               </button>
                               <div class="collapse collapse-content-inner" id="tilemap-collapse">
                                   <div class="content justify pad top-10 btm-10"></div>
                               <pre class="prettyprint lang-cs linenums:235">//Set a new Tile to cell at index
public static void SetTileAtCell(int tileX, int tileY, Tile tile)
{
    if (IsInMapBounds(tileX, tileY))
        mapCells[tileX, tileY] = tile;
}

//Overload --- Updates the Current Tile at index
static public void SetTileAtCell(int x, int y, int layer, int tileIndex, int spriteSheetIndex, string animationKey = "", string animationMode = "", float frameTimer = 0.0f)
{
    if (!IsInMapBounds(x, y)) return;

    Tile tile = mapCells[x, y];

        tile.ClearAnimation(layer);         //Remove any animations on layer
        tile.LayerTiles[layer] = tileIndex; 
        tile.LayerSpriteSheetIndices[layer] = spriteSheetIndex;
        tile.AnimationKey[layer] = animationKey;    //Tagging for animation
        tile.AnimationPlayMode[layer] = animationMode;  //How animation plays back
        tile.FrameTimer = frameTimer;   //Frame speed
}

//Set collision for a tile by map location
static public void SetTileCollider(int x, int y, int boundX, int boundY, int width, int height)
{
    if (IsInMapBounds(x, y))
        SetTileCollider(ref mapCells[x, y], boundX, boundY, width, height);
}

//Set collision directly to Tile
static public void SetTileCollider(ref Tile tile, int boundX, int boundY, int width, int height)
{
    tile.boundX = boundX;
    tile.boundY = boundY;
    tile.boundWidth = width;
    tile.boundHeight = height;
}
</pre>
                               </div>
                               <div class="content pad btm-10"></div>
                               
                            </div>
                            
                            <!--// END GAME ENGINE CONTENT-->
                            
                            <!--GAMEPLAY CONTENT-->
                            <button class="collapse-button" id="gameplay-button" type="button" data-toggle="collapse" data-target="#gameplay-collapse"
            aria-expanded="true" aria-controls="gameplay-collapse">
                                 <div class ="collapse-button-content">Gameplay Loop and Mechanics<img class = "dropdown-icon" src="images/content_dropdown_triangle.png"/></div>
                             </button>
                           <div class="collapse collapse-content" id="gameplay-collapse">
                               <div class ="content pad top-10">
                                   Most of the gameplay mechanics in this Prototype layout the entire gameplay loop. There are plenty of missing factors to be implemented to round out the experience, but at its core, it is a farming RPG. It has a defined gameplay loop: <i>Buy Seeds; Plant; Sleep; Harvest; Repeat</i>.
                               </div>
                               

                               <div class="content font-36 pad top-10 btm-5">Player Controller and GameObjects</div>

                               <div class="content pad btm-5">
                                   <ul>
                                       <li> Testing for collision is based on the corners of tiles. (Moving up tests intersections of either the bottom-right or bottom-left of the 2 tiles. </li>
                                       <li>It is predictive movement, boiled down to the movement attempt using <i><b>Current Speed and Position</b></i>
                                       <ul><li>
                                            A temporary rect with the next Movement coords, and if intersection occurs, the Velocity is set to 0 to the <i>applicable axis</i>.
                                           </li></ul>
                                       </li>
                                       <li>The Player inherits from my own take on a GameObject class that by default has collision functions to compare to tiles <ul><li>So adding enemies (which already has an A* pathfinder class and Tile Nodes ready to implement), would require only adding an AI brain. </li></ul></li>
                                   </ul>
                               </div>
                               
                                   <button class="collapse-button" id="collision-button" type="button" data-toggle="collapse" data-target="#collision-collapse"
            aria-expanded="true" aria-controls="gameplay-collapse">
                                 <div class ="collapse-button-content">Code: Collision<img class = "dropdown-icon" src="images/content_dropdown_triangle.png"/></div>

                             </button>
                               <div class="collapse collapse-content-inner" id="collision-collapse">
                                   <div class="content pad top-10 btm-5">
                                       Predictive collision code in the GameObject class. The Horizontal tests the left and right corners using the corner pixels outside of the GameObject's BoxCollider
                                   </div>
                                   <div class="content pad font-16 vt-5"><i>GameObject.cs Snippet</i></div>

                                   <pre class="prettyprint lang-cs linenums:133">Vector2 HorizontalCollisionTest(Vector2 movement)
{
    if (movement.X == 0) //No need to test collision on X Axis
        return movement;

    Rectangle moveTestCollider = BoxCollider;

    //Get the path of next movement by offsetting the collider
    moveTestCollider.Offset((int)movement.X, 0);
    Vector2 topPixel, bottomPixel;

    if (movement.X &lt; 0)
    {
        topPixel = new Vector2(moveTestCollider.Left, moveTestCollider.Top + 1);        //Gets top left corner of movement
        bottomPixel = new Vector2(moveTestCollider.Left, moveTestCollider.Bottom - 1);  //Gets bottom left corner of movement
    }
    else
    {
        topPixel = new Vector2(moveTestCollider.Right, moveTestCollider.Top + 1);       //Gets top right corner of movement
        bottomPixel = new Vector2(moveTestCollider.Right, moveTestCollider.Bottom - 1); //Gets bottom right corner of movement
    }
    //Covers the 2 tiles, taking the possibility that player is jumping or falling (Y position)
    Vector2 topCell = TileMap.GetCellByPixel(topPixel);
    Vector2 bottomCell = TileMap.GetCellByPixel(bottomPixel);

    //Tests Cells for collision
    if (TileMap.IsColliding(topCell) || TileMap.IsColliding(bottomCell))
    {
        movement.X = 0;     //Disable movement on X
        velocity.X = 0;     //Cancel velocity for current frame
    }

    return movement;
}</pre>
                                   <div class="content pad vt-10">
                                       In the TileMap, there are a number of Overloaded implementatations of Collision Testing. The Top Implementation is unimplemented, but is meant to be custom box colliders, allowing more precise collision
                                   </div>
                                   <div class="content pad font-16 vt-5"><i>TileMap.cs Snippet</i></div>
                                   <pre class="prettyprint lang-cs linenums:156">static public Rectangle CellWorldCollider(int cellX, int cellY)
{
    Tile tile = GetTileAtCell(cellX, cellY);

    if(tile != null)

    return new Rectangle(
        (cellX * TileWidth) + tile.boundX,
        (cellY * TileHeight) + tile.boundY,
        tile.boundWidth, tile.boundHeight);

    return new Rectangle(0,0,0,0);
}

//Collider ScreenSpace Rectangle for tile
static public Rectangle CellScreenCollider(int cellX, int cellY) =>
    Camera.WorldToScreen(CellWorldCollider(cellX, cellY));

//Given the pieces of a coordinate, return whether the Cell has active collision
static public bool IsColliding(int cellX, int cellY)
{
    Tile tile = GetTileAtCell(cellX, cellY);

    if (tile == null)
        return false;
    else
        return tile.CollisionEnabled;
}

static public bool IsCollidingByPixel(Vector2 pixelLocation) =>
    IsColliding(
    GetCellByPixelX((int)pixelLocation.X),
    GetCellByPixelY((int)pixelLocation.Y));

static public bool IsColliding(Vector2 cell) => IsColliding((int)cell.X, (int)cell.Y);
</pre>
                                   
                               </div>
                               <div class="content pad btm-5">

                                   <div class="content font-36 pad top-10 btm-5">Inventory Manager</div>
                                   Inventory was one of the m ost time consuming products, both in Monogame and Unity. In its current form has a few important functions.
                                   
                                   <ul>
                                       <li>Each Slot class has a stack of Item classes to store a type of item<ul><li>
                                           The stacks have flexibility and are easily moved from slot to slot
                                           </li>
                                           <li>
                                               When a stack gets an item of a type, it becomes <i>"Occupied"</i> and the available slot count is updated
                                           </li>
                                           <li>Everytime an item is added to slot, the inventory searches for the item by an ID.
                                               <ul>
                                               <li>
                                                   If an item of type is found, the UIText in that slot updates its item count
                                               </li>
                                                   <li>Otherwise it places itself onto a new slot</li>
                                                   <li>A full inventory means...just ignore everything above</li>
                                               </ul></li>
                                           </ul></li>
                                       <li>There is a reorganize function that also puts all items in the earliest slots, removing empty slots between items</li>
                                       <li>Finally, of course, there is the Add, Remove, and Drop functions, which pop or push from a slot's stack</li>
                                   </ul>
                                   </div>
                               <button class="collapse-button" id="inventory-button" type="button" data-toggle="collapse" data-target="#inventory-collapse"
            aria-expanded="true" aria-controls="inventory-collapse">
                                 <div class ="collapse-button-content">Code: Inventory<img class = "dropdown-icon" src="images/content_dropdown_triangle.png"/></div>

                             </button>
                               <div class="collapse collapse-content-inner" id="inventory-collapse">
                                   <div class="content pad top-10 btm-5">
                                       The inventory code below is primarily Utility functions having to do with navigation and managing slot stacks. It is some of the more important code involving core gameplay
                                   </div>
                                   <div class="content pad font-16 vt-5"><i>InventoryManager.cs Snippet</i></div>
                                   <pre class="prettyprint lang-cs linenums:357">#region Selection
                                   
public static Slot GetSlot(int index) => Slots[index];

//Takes current index and moves it by a specified amount
static void TranslateToActiveSlot(int amount)
{
    SlotIndex += amount;
    CurrentSelectedSlot = GetSlot(SlotIndex);
    moveCurrentTime = 0f;
}

static void SetActiveSlot(int index)
{
    SlotIndex = index;
    CurrentSelectedSlot = GetSlot(SlotIndex);
    moveCurrentTime = 0f;
}

public static void HandleSlotSelection(GameTime gameTime)
{
    KeyboardState kState = Keyboard.GetState();

    //Timer
    moveCurrentTime += (float)gameTime.ElapsedGameTime.TotalSeconds;

    if (moveCurrentTime &lt; moveSelectionTimer) return;

    if (kState.IsKeyDown(Keys.Up) &amp; SlotIndex - ColCount &gt;= 0)
    {
        TranslateToActiveSlot(-ColCount);   //Move up a row
    }
    else if (kState.IsKeyDown(Keys.Down) &amp; (SlotIndex + ColCount &lt; Slots.Count))
    {
        TranslateToActiveSlot(ColCount);    //Move down a row
    }
    else if (kState.IsKeyDown(Keys.Left) &amp; SlotIndex &gt; 0)
    {
        TranslateToActiveSlot(-1);          //Move Left
    }
    else if (kState.IsKeyDown(Keys.Right) &amp; (SlotIndex + 1 &lt; Slots.Count))
    {
        TranslateToActiveSlot(1);           //Move Right
    }
}

#endregion

#region Add, Remove, and Manage Items

public static void AddItem(Item item)
{
    if (IsFull) return;

    //First loop checks for item by ID in reduced list
    foreach(Slot slot in OccupiedSlots)
        if (slot.CurrentItem.ID == item.ID)
        {
            slot.PushItem(item);
            return;
        }

    //Second Loop finds an unoccupied slot
    foreach (Slot slot in Slots)
        if (!slot.IsOccupied)
        {
            EmptySlots--;
            slot.PushItem(item);
            return;
        }
}

public static Item DropSelectedItem() => CurrentSelectedSlot.PopItem();

public static void Reorganize()
{
    for(int i = 0; i &lt; Slots.Count - 1;)
    {
        if (Slots[i + 1].IsOccupied &amp; !Slots[i].IsOccupied)
        {
            SwapSlotItems(i, i+1);
            if(i > 0) i--;
            continue;
        }
        i++;
    }
}

public static void SwapSlotItems(int a, int b)
{
    Stack&lt;Item&gt; items = Slots[a].Items;

    Slots[a].Items = Slots[b].Items;
    Slots[b].Items = items;

    ChangeSprite(a);
    ChangeSprite(b);
}

#endregion</pre>
                                   <div class="content pad top-10 btm-5">The Slot Elements inherit from the UISprite class I built, which implements from UIElement. Some basic Utility functions control adding and removing items from the Item stack</div>
                               
                               <div class="content pad font-16 vt-5"><i>Slot.cs Snippet</i></div>
                               <pre class="prettyprint lang-cs linenums:66">#region Add and Remove Items

//Throws set number of stacks out
internal void RemoveItems(int quantity)
{
    for(int i = 0; i &lt; quantity; i++) PopItem();
}

//Get an item from Item Stack
internal Item PopItem()
{
    if (!IsOccupied)    //If stack is empty before popping, return nothing
        return null;

    Item pop = items.Pop(); //Get the next item in stack

    if (!IsOccupied)    //If stack is empty after popping an item
    {
        ChangeSprite();    //Change UISprite back to default empty slot
        InventoryManager.EmptySlots++;     //Give a Slot back to inventory
    }
    UpdateText();
    return pop; 
}

//Add an item into item stack
internal void PushItem(Item item)
{
    ChangeSprite(item.UIFrameX, item.UIFrameY);    //If slot is empty, set to item's UI Sprite
    items.Push(item);   //Add item to slot
    UpdateText();
}
#endregion

#region Font Handling

internal void UpdateText()
{
    if (Count &lt;= 1)
        uiCount.Text = "";
    else
        uiCount.Text = Count.ToString();
}

#endregion
                               </pre>
                               </div>
                               
                               <div class="content pad btm-10"></div>
                            </div>
                            <!--//END GAMEPLAY CONTENT-->
                                                      
                            <!--SAVE AND LOAD CONTENT-->
                            <button class="collapse-button" id="ui-button" type="button" data-toggle="collapse" data-target="#ui-collapse"
            aria-expanded="true" aria-controls="ui-collapse">
                                 <div class ="collapse-button-content">UI Management and Components<img class = "dropdown-icon" src="images/content_dropdown_triangle.png"/></div>
                             </button>
                           <div class="collapse collapse-content" id="ui-collapse">
                               <div class ="content pad justify vt-10">One of the main components I wanted to focus on early was developing a clean UI Handling System, that allowed a "fire and forget" approach to managing them. To start, I built a hierarchy of classes, inheriting functionality for different purposes. I further built upon the features of the code base as I iterated on the Red Rock Farmer. After the game was in a good place, I untangled UI elements scattered throughout the project with a UIManager class, which handles drawing, updating, adding, and removing elements. </div>
                               
                               <div class = "content pad top-10 btm-5">This is an example of a 1920 by 1080 game, where the default inventory anchor is set to 50% on the x axis and 80% on the y. regardless of resolution, the position stays the same. 
                               </div>
                               <div class="content"><img src="images/redrockfarmer-ui-1920-1080.PNG">
                               </div>
                               
                                                              <div class = "content pad center top-20 btm-5">By contrast, a square resolution. The UI is still at screen position (.5, .8), relative to the 1:1 screen ratio
                               </div>
                               <div class="content pad btm-20"><img style="width: 50%; margin-left: 25%;" src="images/redrockfarmer-ui-1000-1000.PNG"></div>
                               <button class="collapse-button" data-toggle="collapse" href="#codemap-slot-collapse" role="button" aria-expanded="true" aria-controls="codemap-slot-collapse">
                                    <div class="collapse-button-content">
                                        Code Map: UIElement <img class = "dropdown-icon" src="images/content_dropdown_triangle.png"/></div>
          </button>
                               <div class="collapse collapse-content-inner" id="codemap-slot-collapse">
                                   <div class="content pad top-10 btm-5">
                                   Slot is a custom UI element that inherits from UISprite. UISprite is the Image handling class, inheriting from the base class UIElement, which doesn't handle any drawing, but is an abstract class that manages positioning in Screen and </div>
                                                  <div class="content pad btm-10">
                               <img src="images/redrockfarmer-slot-codemap.PNG">
                               </div>
                               </div>
                               <button class="collapse-button" data-toggle="collapse" href="#inventory-collapse" role="button" aria-expanded="true" aria-controls="inventory-collapse">
                                    <div class="collapse-button-content">
                                        Code: Inventory UI Handling <img class = "dropdown-icon" src="images/content_dropdown_triangle.png"/></div>
          </button>
              <div class ="content pad btm-5"></div>
              <div class="collapse collapse-content-inner" id="inventory-collapse">
                  <div class ="content inner pad top-5 btm-10">
                      This is an implementation of the UI sprites within the Inventory class. There are several ways to move the Slots via their rows and cols, including setting anchors using a percent value,  positioning in pixels, and positioning in pixels relative to another object. This is still in development, this current code is going to be refactored into the UIElement class, to position any element by screen percent or relative to another object.
                  </div>
                  
                  <div class ="content inner pad top-5 btm-5">
                      Here are the implementations and functions on line 238 and 251 that use them.
                  </div>
                               
                                              <pre class="prettyprint lang-cs linenums:125">/// &lt;summary&gt;
/// Get individual slot X position in Screen Space
/// &lt;/summary&gt;
/// &lt;param name="col"&gt;col of slot in array&lt;/param&gt;
/// &lt;param name="screenSpaceAnchorX"&gt;X position of slot as percent (0.0 - 1.0)&lt;/param&gt;
/// &lt;returns&gt;X Position in Screen space as pixels&lt;/returns&gt;
public static int GetSlotPositionX(int col, float screenSpaceAnchorX = 0f)
{
    int screenSpaceX = (int)(Camera.ViewPortWidth * screenSpaceAnchorX);
    int offset = col * SlotWidth - (ColCount * SlotWidth) / 2;
    return screenSpaceX + offset;
}

/// &lt;summary&gt;
/// Set slot position relative to another UI Element or Screen Space position
/// &lt;/summary&gt;
/// &lt;param name="col"&gt;col of slot in array&lt;/param&gt;
/// &lt;param name="relativeTo">Offset relative to another Screen space position&lt;/param&gt;
/// &lt;returns>X Position in Screen space as pixels&lt;/returns>
public static int GetSlotRelativePositionX(int col, int relativeTo) =&gt; 
    GetSlotPositionX(col) + relativeTo;

/// &lt;summary>
/// Set slot position relative to another Screen Space position, with margins between cols
/// &lt;/summary>
/// &lt;param name="col">col of slot in array&lt;/param>
/// &lt;param name="relativeTo">Offset relative to another Screen space position&lt;/param>
/// &lt;param name="spaceBetweenCols">Offset relative to another Screen space position&lt;/param>
/// &lt;returns>X Position in Screen space as pixels&lt;/returns>
public static int GetSlotRelativePositionX(int col, int relativeTo, int spaceBetweenCols)
{
    int relativeSlotPositionX = GetSlotRelativePositionX(col, relativeTo);
    int spacing = (spaceBetweenCols * (col % ColCount)) - spaceBetweenCols;

    return relativeSlotPositionX + spacing;
}

/// &lt;summary&gt;
/// Get individual Slot Y position in Screen Space
/// &lt;/summary&gt;
/// param name="row">Row of slot in array&lt;/param>
/// &lt;param name="screenSpaceAnchorY">Y position of slot as percent (0.0 - 1.0)&lt;/param>
/// &lt;returns>Slot Y Position in Screen space as pixels&lt;/returns>
public static int GetSlotPositionY(int row, float screenSpaceAnchorY = 0f)
{
    int screenSpaceY = (int)(Camera.ViewPortHeight * screenSpaceAnchorY);
    int offset = row * SlotHeight - (RowCount * SlotHeight) / 2;

    return screenSpaceY + offset;
}

/// &lt;summary>
/// Get Slot Y Position relative to another Screen Space Position
/// &lt;/summary>
/// &lt;param name="row">Row of Slot in array&lt;/param>
/// &lt;param name="relativeTo">Offset relative to another Screen Space Position&lt;/param>
/// &lt;returns>X Position in Screen space as pixels&lt;/returns>
public static int GetSlotRelativePositionY(int row, int relativeTo) => GetSlotPositionY(row) + relativeTo;

/// &lt;summary>
/// Get Slot Y Position relative to another Screen Space Position, with space between Rows
/// &lt;/summary>
/// &lt;param name="row">col of slot in array&lt;/param>
/// &lt;param name="relativeTo">Offset relative to another Screen space position&lt;/param>
/// &lt;param name="spaceBetweenRows">Offset relative to another Screen space position&lt;/param>
/// &lt;returns>X Position in Screen space as pixels&lt;/returns>
public static int GetSlotRelativePositionY(int row, int relativeTo, int spaceBetweenRows)
{
    int relativeSlotPositionY = GetSlotRelativePositionY(row, relativeTo);
    int spacing = (spaceBetweenRows * (row % RowCount)) - spaceBetweenRows;

    return relativeSlotPositionY + spacing;
}

//Assign slot positions based on anchor points
public static void SetSlotPosition(
     int col, int row, float screenSpaceAnchorX = 0f, float screenSpaceAnchorY = 0f)
{
    Slot currentSlot = GetSlot(row * ColCount + col);   //Get slot out of list

    int x = GetSlotPositionX(col, screenSpaceAnchorX);
    int y = GetSlotPositionY(row, screenSpaceAnchorY);

    currentSlot.SetPosition(x, y);
}

//Assign Slot Position using anchor point (center position)
public static void SetSlotRelativePosition(int col, int row, int relativeX, int relativeY)
{
    Slot currentSlot = GetSlot(row * ColCount + col);   //Get slot out of list

    int x = GetSlotRelativePositionX(col, relativeX);
    int y = GetSlotRelativePositionY(row, relativeY);

    currentSlot.SetPosition(x, y);
}

//Assign Slot Position relative to a Screen Space Position
public static void SetSlotRelativePosition(int col, int row, int relativeX, int relativeY, int spaceBetweenCols, int spaceBetweenRows)
{
    Slot currentSlot = GetSlot(row * ColCount + col);   //Get slot out of list
    int x = GetSlotRelativePositionX(col, relativeX, spaceBetweenCols);
    int y = GetSlotRelativePositionY(row, relativeY, spaceBetweenRows);

    currentSlot.SetPosition(x, y);
}

public static void SetInventoryLayout(int rows, int cols,
    float screenSpaceAnchorX, float screenSpaceAnchorY)
{
    SetSlotGrid(rows, cols);

    for(int i = 0; i &lt; Slots.Count; i++)
    {
        int row = i / cols, 
            col = i % cols;
        SetSlotPosition(col, row, screenSpaceAnchorX, screenSpaceAnchorY);
    }
}

public static void SetInventoryLayout(int rows, int cols, int relativeX, int relativeY, int spaceBetweenCols = 0, int spaceBetweenRows= 0)
{
    SetSlotGrid(rows, cols);

    for (int i = 0; i &lt; Slots.Count; i++)
    {
        int row = i / cols,
            col = i % cols;

        SetSlotRelativePosition(col, row, relativeX, relativeY, spaceBetweenCols, spaceBetweenRows);
    }
}
                                              </pre>
                  <div class="content pad btm-10"></div>
                               </div>
                               </div>
                            <!--//END SAVE AND LOAD CONTENT-->
                            
                            <!--PIXEL ART CONTENT-->
                            <button class="collapse-button" id="pixelart-button" type="button" data-toggle="collapse" data-target="#pixelart-collapse"
            aria-expanded="true" aria-controls="pixelart-collapse">
                                 <div class ="collapse-button-content">Graphic Design and Sprite Sheets<img class = "dropdown-icon" src="images/content_dropdown_triangle.png"/></div>
                             </button>
                           <div class="collapse collapse-content" id="pixelart-collapse">
                               <div class ="content pad vt-10"></div></div>
                            <!--//END PIXEL ART CONTENT-->
                            
                            <!--PORTING CONTENT-->
                            <button class="collapse-button" id="porting-button" type="button" data-toggle="collapse" data-target="#porting-collapse"
            aria-expanded="true" aria-controls="level-design-collapse">
                                 <div class ="collapse-button-content"> Porting from Unity Engine To MonoGame<img class = "dropdown-icon" src="images/content_dropdown_triangle.png"/></div>
                             </button>
                           
                            <div class="collapse collapse-content" id="porting-collapse">
                                <div class ="content justify pad top-10">
                                I won't go too in-depth regarding version comparisons, but there are some key differences. With the addition of my Tile Engine Editor, which was built in C# and used to construct the levels, I was able to dynamically update my map, without being tethered to a 2D array. On the flipside, without built-in components like materials, 3D lights, there are  some missing elements in the MonoGame port. For example, I have a bump map in the Unity version, which was a nice visual addition to the game. This is something that will require building in the MonoGame version. 
                                </div><div class="content font-36 pad btm-10">Porting to Monogame</div>
                                <div class="content justify pad btm-">
                                    Building in Monogame, despite having to write all of your own tools, has been a much quicker environment to get a build up and running. Prior to building the Level Editor, I got my first build of the core mechanics, and the art assets, in the game. I have a UI engine that handles placing UI in world and screen space. Screen space bases off Top-Left, and percentage of total ViewPort size. I found it preferable to the Canvas system in Unity.
                                </div>
                            </div>
                            
                            <!--//END PORTING CONTENT-->
                            
                            <!--FUTURE CONTENT CONTENT-->
                            <button class="collapse-button" id="future-button" type="button" data-toggle="collapse" data-target="#future-collapse"
            aria-expanded="true" aria-controls="future-collapse">
                                 <div class ="collapse-button-content">Content in the Future<img class = "dropdown-icon" src="images/content_dropdown_triangle.png"/></div>
                             </button>
                           <div class="collapse collapse-content" id="future-collapse">
                               <div class ="content pad vt-10"></div></div>
                            <!--//END FUTURE CONTENT CONTENT-->
                         </div>
                      </div>         
                   </div>
                </div>
              </div>
             </div>
          </div>
          
          <div id="nav-container" style="display:block; transform: translateY(0px);">
            <div id="nav-background"></div>
        <div class="container-fluid">
            <div class="row">
                <div class="menu-item col-xs-5 col-sm-4 col-lg-3 col-xl-2">
                    <div id="name">
                        <span>Joseph <b>Sierejko</b></span></div>
                </div>
                <div class="col-sm-8 col-md-7 col-lg-8" >
                <div id = "button-menu" style="overflow-x: hidden;">
                    <button class = "nav-item" id = "project-main-button" data-target-element ="#project-header"><span><img id="project-img" src="images/project_png.png"/>PROJECTS</span></button>
<!--                    <button class = "nav-item" type = "button" id = "design-main-button" data-target-element = "#design-header"><img id="contact-img" src="images/graphic_design_png.png"/>Graphic Design</button>-->
                    <button class = "nav-item" type = "button" id = "about-main-button" data-target-element ="#about-header"><img id="about-img" src="images/about_png.png"/>ABOUT</button>
                    <button class = "nav-item" type = "button" id = "contact-main-button" data-target-element ="#contact-header" ><img id="contact-img" src="images/contact_png.png"/>CONTACT</button>
                    <button class = "nav-item" type = "button" id = "resume-main-button" ><img id="about-img" src="images/resume_png.png"/>RÃ‰SUMÃ‰</button>
                </div>
                </div>
            </div>
            </div>
                            <button id="hamburger-button" onclick="openNav()">â˜°</button>
            </div>

                   <div id="redrockfarmer-background" class="background"></div>
                <footer class ="footer">
         <p>&copy; 2020 Joseph M Sierejko</p>
         <p><i>Website Designed and Developed by Me</i></p>
      </footer>
             </body>

   </html>